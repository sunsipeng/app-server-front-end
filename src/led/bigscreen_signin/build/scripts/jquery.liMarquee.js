!function($){var methods={init:function(options){var p={direction:"left",loop:-1,scrolldelay:0,scrollamount:50,circular:!0,drag:!0,runshort:!0,hoverstop:!0,inverthover:!1,xml:!1};return options&&$.extend(p,options),this.each(function(){var enterEvent="mouseenter",leaveEvent="mouseleave";p.inverthover&&(enterEvent="mouseleave",leaveEvent="mouseenter");var loop=p.loop,strWrap=$(this).addClass("str_wrap").data({scrollamount:p.scrollamount}),fMove=!1,strWrapStyle=strWrap.attr("style");if(strWrapStyle)for(var wrapStyleArr=strWrapStyle.split(";"),startHeight=!1,i=0;i<wrapStyleArr.length;i++)-1!=$.trim(wrapStyleArr[i]).search(/^height/g)&&(startHeight=parseFloat(strWrap.css("height")));var code=function(){strWrap.off("mouseleave"),strWrap.off("mouseenter"),strWrap.off("mousemove"),strWrap.off("mousedown"),strWrap.off("mouseup"),$(".str_move",strWrap).length||strWrap.wrapInner($("<div>").addClass("str_move"));var strMove=$(".str_move",strWrap).addClass("str_origin"),strMoveClone=strMove.clone().removeClass("str_origin").addClass("str_move_clone"),time=0;p.hoverstop||strWrap.addClass("noStop");var circCloneHor=function(){strMoveClone.clone().css({left:"100%",right:"auto",width:strMove.width()}).appendTo(strMove),strMoveClone.css({right:"100%",left:"auto",width:strMove.width()}).appendTo(strMove)},circCloneVert=function(){strMoveClone.clone().css({top:"100%",bottom:"auto",height:strMove.height()}).appendTo(strMove),strMoveClone.css({bottom:"100%",top:"auto",height:strMove.height()}).appendTo(strMove)};if("left"==p.direction)if(strWrap.height(strMove.outerHeight()),strMove.width()>strWrap.width()){leftPos=-strMove.width();p.circular&&(p.xml||(circCloneHor(),leftPos=-(strMove.width()+(strMove.width()-strWrap.width())))),p.xml&&strMove.css({left:strWrap.width()});var strMoveLeft=strWrap.width(),k1=0,timeFunc1=function(){var fullS=Math.abs(leftPos),time=fullS/strWrap.data("scrollamount")*1e3;return 0!=parseFloat(strMove.css("left"))&&(time=((fullS+=strWrap.width())-(strWrap.width()-parseFloat(strMove.css("left"))))/strWrap.data("scrollamount")*1e3),time},moveFuncId1=!1,moveFunc1=function(){0!=loop&&strMove.stop(!0).animate({left:leftPos},timeFunc1(),"linear",function(){$(this).css({left:strWrap.width()}),-1==loop?moveFuncId1=setTimeout(moveFunc1,p.scrolldelay):(loop--,moveFuncId1=setTimeout(moveFunc1,p.scrolldelay))})};strWrap.data({moveId:moveFuncId1,moveF:moveFunc1}),p.inverthover||moveFunc1(),p.hoverstop&&(strWrap.on(enterEvent,function(){$(this).addClass("str_active"),clearTimeout(moveFuncId1),strMove.stop(!0)}).on(leaveEvent,function(){$(this).removeClass("str_active"),$(this).off("mousemove"),moveFunc1()}),p.drag?strWrap.on("mousedown",function(e){p.inverthover&&strMove.stop(!0);var dragLeft,newX,dir=1,oldX=e.clientX;return strMoveLeft=strMove.position().left,k1=strMoveLeft-(e.clientX-strWrap.offset().left),$(this).on("mousemove",function(e){fMove=!0,newX=e.clientX,dir=newX>oldX?1:-1,oldX=newX,dragLeft=k1+(e.clientX-strWrap.offset().left),p.circular?(dragLeft<-strMove.width()&&dir<0&&(dragLeft=0,strMoveLeft=strMove.position().left,k1=strMoveLeft-(e.clientX-strWrap.offset().left)),dragLeft>0&&dir>0&&(dragLeft=-strMove.width(),strMoveLeft=strMove.position().left,k1=strMoveLeft-(e.clientX-strWrap.offset().left))):(dragLeft<-strMove.width()&&dir<0&&(dragLeft=strWrap.width(),strMoveLeft=strMove.position().left,k1=strMoveLeft-(e.clientX-strWrap.offset().left)),dragLeft>strWrap.width()&&dir>0&&(dragLeft=-strMove.width(),strMoveLeft=strMove.position().left,k1=strMoveLeft-(e.clientX-strWrap.offset().left))),strMove.stop(!0).css({left:dragLeft})}).on("mouseup",function(){$(this).off("mousemove"),p.inverthover&&strMove.trigger("mouseenter"),setTimeout(function(){fMove=!1},50)}),!1}).on("click",function(){if(fMove)return!1}):strWrap.addClass("no_drag"))}else if(p.runshort){strMove.css({left:strWrap.width()});var strMoveLeft=strWrap.width(),k1=0,timeFunc=function(){return time=(strMove.width()+strMove.position().left)/strWrap.data("scrollamount")*1e3},moveFunc=function(){var leftPos=-strMove.width();strMove.animate({left:leftPos},timeFunc(),"linear",function(){$(this).css({left:strWrap.width()}),-1==loop?setTimeout(moveFunc,p.scrolldelay):(loop--,setTimeout(moveFunc,p.scrolldelay))})};strWrap.data({moveF:moveFunc}),p.inverthover||moveFunc(),p.hoverstop&&(strWrap.on(enterEvent,function(){$(this).addClass("str_active"),strMove.stop(!0)}).on(leaveEvent,function(){$(this).removeClass("str_active"),$(this).off("mousemove"),moveFunc()}),p.drag?strWrap.on("mousedown",function(e){p.inverthover&&strMove.stop(!0);var dragLeft,newX,dir=1,oldX=e.clientX;return strMoveLeft=strMove.position().left,k1=strMoveLeft-(e.clientX-strWrap.offset().left),$(this).on("mousemove",function(e){fMove=!0,newX=e.clientX,dir=newX>oldX?1:-1,oldX=newX,(dragLeft=k1+(e.clientX-strWrap.offset().left))<-strMove.width()&&dir<0&&(dragLeft=strWrap.width(),strMoveLeft=strMove.position().left,k1=strMoveLeft-(e.clientX-strWrap.offset().left)),dragLeft>strWrap.width()&&dir>0&&(dragLeft=-strMove.width(),strMoveLeft=strMove.position().left,k1=strMoveLeft-(e.clientX-strWrap.offset().left)),strMove.stop(!0).css({left:dragLeft})}).on("mouseup",function(){p.inverthover&&strMove.trigger("mouseenter"),$(this).off("mousemove"),setTimeout(function(){fMove=!1},50)}),!1}).on("click",function(){if(fMove)return!1}):strWrap.addClass("no_drag"))}else strWrap.addClass("str_static");if("right"==p.direction)if(strWrap.height(strMove.outerHeight()),strWrap.addClass("str_right"),strMove.css({left:-strMove.width(),right:"auto"}),strMove.width()>strWrap.width()){var leftPos=strWrap.width();strMove.css({left:0}),p.circular&&(p.xml||(circCloneHor(),leftPos=strMove.width()));k2=0;timeFunc=function(){var fullS=strWrap.width(),time=fullS/strWrap.data("scrollamount")*1e3;return 0!=parseFloat(strMove.css("left"))&&(time=((fullS=strMove.width()+strWrap.width())-(strMove.width()+parseFloat(strMove.css("left"))))/strWrap.data("scrollamount")*1e3),time};moveFunc=function(){0!=loop&&strMove.animate({left:leftPos},timeFunc(),"linear",function(){$(this).css({left:-strMove.width()}),-1==loop?setTimeout(moveFunc,p.scrolldelay):(loop--,setTimeout(moveFunc,p.scrolldelay))})};strWrap.data({moveF:moveFunc}),p.inverthover||moveFunc(),p.hoverstop&&(strWrap.on(enterEvent,function(){$(this).addClass("str_active"),strMove.stop(!0)}).on(leaveEvent,function(){$(this).removeClass("str_active"),$(this).off("mousemove"),moveFunc()}),p.drag?strWrap.on("mousedown",function(e){p.inverthover&&strMove.stop(!0);var dragLeft,newX,dir=1,oldX=e.clientX;return strMoveLeft=strMove.position().left,k2=strMoveLeft-(e.clientX-strWrap.offset().left),$(this).on("mousemove",function(e){fMove=!0,newX=e.clientX,dir=newX>oldX?1:-1,oldX=newX,dragLeft=k2+(e.clientX-strWrap.offset().left),p.circular?(dragLeft<-strMove.width()&&dir<0&&(dragLeft=0,strMoveLeft=strMove.position().left,k2=strMoveLeft-(e.clientX-strWrap.offset().left)),dragLeft>0&&dir>0&&(dragLeft=-strMove.width(),strMoveLeft=strMove.position().left,k2=strMoveLeft-(e.clientX-strWrap.offset().left))):(dragLeft<-strMove.width()&&dir<0&&(dragLeft=strWrap.width(),strMoveLeft=strMove.position().left,k2=strMoveLeft-(e.clientX-strWrap.offset().left)),dragLeft>strWrap.width()&&dir>0&&(dragLeft=-strMove.width(),strMoveLeft=strMove.position().left,k2=strMoveLeft-(e.clientX-strWrap.offset().left))),strMove.stop(!0).css({left:dragLeft})}).on("mouseup",function(){p.inverthover&&strMove.trigger("mouseenter"),$(this).off("mousemove"),setTimeout(function(){fMove=!1},50)}),!1}).on("click",function(){if(fMove)return!1}):strWrap.addClass("no_drag"))}else if(p.runshort){var k2=0,timeFunc=function(){return time=(strWrap.width()-strMove.position().left)/strWrap.data("scrollamount")*1e3},moveFunc=function(){var leftPos=strWrap.width();strMove.animate({left:leftPos},timeFunc(),"linear",function(){$(this).css({left:-strMove.width()}),-1==loop?setTimeout(moveFunc,p.scrolldelay):(loop--,setTimeout(moveFunc,p.scrolldelay))})};strWrap.data({moveF:moveFunc}),p.inverthover||moveFunc(),p.hoverstop&&(strWrap.on(enterEvent,function(){$(this).addClass("str_active"),strMove.stop(!0)}).on(leaveEvent,function(){$(this).removeClass("str_active"),$(this).off("mousemove"),moveFunc()}),p.drag?strWrap.on("mousedown",function(e){p.inverthover&&strMove.stop(!0);var dragLeft,newX,dir=1,oldX=e.clientX;return strMoveLeft=strMove.position().left,k2=strMoveLeft-(e.clientX-strWrap.offset().left),$(this).on("mousemove",function(e){fMove=!0,newX=e.clientX,dir=newX>oldX?1:-1,oldX=newX,(dragLeft=k2+(e.clientX-strWrap.offset().left))<-strMove.width()&&dir<0&&(dragLeft=strWrap.width(),strMoveLeft=strMove.position().left,k2=strMoveLeft-(e.clientX-strWrap.offset().left)),dragLeft>strWrap.width()&&dir>0&&(dragLeft=-strMove.width(),strMoveLeft=strMove.position().left,k2=strMoveLeft-(e.clientX-strWrap.offset().left)),strMove.stop(!0).css({left:dragLeft})}).on("mouseup",function(){p.inverthover&&strMove.trigger("mouseenter"),$(this).off("mousemove"),setTimeout(function(){fMove=!1},50)}),!1}).on("click",function(){if(fMove)return!1}):strWrap.addClass("no_drag"))}else strWrap.addClass("str_static");if("up"==p.direction)if(strWrap.addClass("str_vertical"),strMove.height()>strWrap.height()){topPos=-strMove.height();p.circular&&(p.xml||(circCloneVert(),topPos=-(strMove.height()+(strMove.height()-strWrap.height())))),p.xml&&strMove.css({top:strWrap.height()});k2=0;timeFunc=function(){var fullS=Math.abs(topPos),time=fullS/strWrap.data("scrollamount")*1e3;return 0!=parseFloat(strMove.css("top"))&&(time=((fullS+=strWrap.height())-(strWrap.height()-parseFloat(strMove.css("top"))))/strWrap.data("scrollamount")*1e3),time};moveFunc=function(){0!=loop&&strMove.animate({top:topPos},timeFunc(),"linear",function(){$(this).css({top:strWrap.height()}),-1==loop?setTimeout(moveFunc,p.scrolldelay):(loop--,setTimeout(moveFunc,p.scrolldelay))})};strWrap.data({moveF:moveFunc}),p.inverthover||moveFunc(),p.hoverstop&&(strWrap.on(enterEvent,function(){$(this).addClass("str_active"),strMove.stop(!0)}).on(leaveEvent,function(){$(this).removeClass("str_active"),$(this).off("mousemove"),moveFunc()}),p.drag?strWrap.on("mousedown",function(e){p.inverthover&&strMove.stop(!0);var dragTop,newY,dir=1,oldY=e.clientY;return strMoveTop=strMove.position().top,k2=strMoveTop-(e.clientY-strWrap.offset().top),$(this).on("mousemove",function(e){fMove=!0,(newY=e.clientY)>oldY?dir=1:newY<oldY&&(dir=-1),oldY=newY,dragTop=k2+e.clientY-strWrap.offset().top,p.circular?(dragTop<-strMove.height()&&dir<0&&(dragTop=0,strMoveTop=strMove.position().top,k2=strMoveTop-(e.clientY-strWrap.offset().top)),dragTop>0&&dir>0&&(dragTop=-strMove.height(),strMoveTop=strMove.position().top,k2=strMoveTop-(e.clientY-strWrap.offset().top))):(dragTop<-strMove.height()&&dir<0&&(dragTop=strWrap.height(),strMoveTop=strMove.position().top,k2=strMoveTop-(e.clientY-strWrap.offset().top)),dragTop>strWrap.height()&&dir>0&&(dragTop=-strMove.height(),strMoveTop=strMove.position().top,k2=strMoveTop-(e.clientY-strWrap.offset().top))),strMove.stop(!0).css({top:dragTop})}).on("mouseup",function(){p.inverthover&&strMove.trigger("mouseenter"),$(this).off("mousemove"),setTimeout(function(){fMove=!1},50)}),!1}).on("click",function(){if(fMove)return!1}):strWrap.addClass("no_drag"))}else if(p.runshort){strMove.css({top:strWrap.height()});var k2=0,timeFunc=function(){return time=(strMove.height()+strMove.position().top)/strWrap.data("scrollamount")*1e3},moveFunc=function(){var topPos=-strMove.height();strMove.animate({top:topPos},timeFunc(),"linear",function(){$(this).css({top:strWrap.height()}),-1==loop?setTimeout(moveFunc,p.scrolldelay):(loop--,setTimeout(moveFunc,p.scrolldelay))})};strWrap.data({moveF:moveFunc}),p.inverthover||moveFunc(),p.hoverstop&&(strWrap.on(enterEvent,function(){$(this).addClass("str_active"),strMove.stop(!0)}).on(leaveEvent,function(){$(this).removeClass("str_active"),$(this).off("mousemove"),moveFunc()}),p.drag?strWrap.on("mousedown",function(e){p.inverthover&&strMove.stop(!0);var dragTop,newY,dir=1,oldY=e.clientY;return strMoveTop=strMove.position().top,k2=strMoveTop-(e.clientY-strWrap.offset().top),$(this).on("mousemove",function(e){fMove=!0,(newY=e.clientY)>oldY?dir=1:newY<oldY&&(dir=-1),oldY=newY,(dragTop=k2+e.clientY-strWrap.offset().top)<-strMove.height()&&dir<0&&(dragTop=strWrap.height(),strMoveTop=strMove.position().top,k2=strMoveTop-(e.clientY-strWrap.offset().top)),dragTop>strWrap.height()&&dir>0&&(dragTop=-strMove.height(),strMoveTop=strMove.position().top,k2=strMoveTop-(e.clientY-strWrap.offset().top)),strMove.stop(!0).css({top:dragTop})}).on("mouseup",function(){p.inverthover&&strMove.trigger("mouseenter"),$(this).off("mousemove"),setTimeout(function(){fMove=!1},50)}),!1}).on("click",function(){if(fMove)return!1}):strWrap.addClass("no_drag"))}else strWrap.addClass("str_static");if("down"==p.direction)if(strWrap.addClass("str_vertical").addClass("str_down"),strMove.css({top:-strMove.height(),bottom:"auto"}),strMove.height()>strWrap.height()){var topPos=strWrap.height();p.circular&&(p.xml||(circCloneVert(),topPos=strMove.height())),p.xml&&strMove.css({top:-strMove.height()});k2=0;timeFunc=function(){var fullS=strWrap.height(),time=fullS/strWrap.data("scrollamount")*1e3;return 0!=parseFloat(strMove.css("top"))&&(time=((fullS=strMove.height()+strWrap.height())-(strMove.height()+parseFloat(strMove.css("top"))))/strWrap.data("scrollamount")*1e3),time};moveFunc=function(){0!=loop&&strMove.animate({top:topPos},timeFunc(),"linear",function(){$(this).css({top:-strMove.height()}),-1==loop?setTimeout(moveFunc,p.scrolldelay):(loop--,setTimeout(moveFunc,p.scrolldelay))})};strWrap.data({moveF:moveFunc}),p.inverthover||moveFunc(),p.hoverstop&&(strWrap.on(enterEvent,function(){$(this).addClass("str_active"),strMove.stop(!0)}).on(leaveEvent,function(){$(this).removeClass("str_active"),$(this).off("mousemove"),moveFunc()}),p.drag?strWrap.on("mousedown",function(e){p.inverthover&&strMove.stop(!0);var dragTop,newY,dir=1,oldY=e.clientY;return strMoveTop=strMove.position().top,k2=strMoveTop-(e.clientY-strWrap.offset().top),$(this).on("mousemove",function(e){fMove=!0,(newY=e.clientY)>oldY?dir=1:newY<oldY&&(dir=-1),oldY=newY,dragTop=k2+e.clientY-strWrap.offset().top,p.circular?(dragTop<-strMove.height()&&dir<0&&(dragTop=0,strMoveTop=strMove.position().top,k2=strMoveTop-(e.clientY-strWrap.offset().top)),dragTop>0&&dir>0&&(dragTop=-strMove.height(),strMoveTop=strMove.position().top,k2=strMoveTop-(e.clientY-strWrap.offset().top))):(dragTop<-strMove.height()&&dir<0&&(dragTop=strWrap.height(),strMoveTop=strMove.position().top,k2=strMoveTop-(e.clientY-strWrap.offset().top)),dragTop>strWrap.height()&&dir>0&&(dragTop=-strMove.height(),strMoveTop=strMove.position().top,k2=strMoveTop-(e.clientY-strWrap.offset().top))),strMove.stop(!0).css({top:dragTop})}).on("mouseup",function(){p.inverthover&&strMove.trigger("mouseenter"),$(this).off("mousemove"),setTimeout(function(){fMove=!1},50)}),!1}).on("click",function(){if(fMove)return!1}):strWrap.addClass("no_drag"))}else if(p.runshort){var k2=0,timeFunc=function(){return time=(strWrap.height()-strMove.position().top)/strWrap.data("scrollamount")*1e3},moveFunc=function(){var topPos=strWrap.height();strMove.animate({top:topPos},timeFunc(),"linear",function(){$(this).css({top:-strMove.height()}),-1==loop?setTimeout(moveFunc,p.scrolldelay):(loop--,setTimeout(moveFunc,p.scrolldelay))})};strWrap.data({moveF:moveFunc}),p.inverthover||moveFunc(),p.hoverstop&&(strWrap.on(enterEvent,function(){$(this).addClass("str_active"),strMove.stop(!0)}).on(leaveEvent,function(){$(this).removeClass("str_active"),$(this).off("mousemove"),moveFunc()}),p.drag?strWrap.on("mousedown",function(e){p.inverthover&&strMove.stop(!0);var dragTop,newY,dir=1,oldY=e.clientY;return strMoveTop=strMove.position().top,k2=strMoveTop-(e.clientY-strWrap.offset().top),$(this).on("mousemove",function(e){fMove=!0,(newY=e.clientY)>oldY?dir=1:newY<oldY&&(dir=-1),oldY=newY,(dragTop=k2+e.clientY-strWrap.offset().top)<-strMove.height()&&dir<0&&(dragTop=strWrap.height(),strMoveTop=strMove.position().top,k2=strMoveTop-(e.clientY-strWrap.offset().top)),dragTop>strWrap.height()&&dir>0&&(dragTop=-strMove.height(),strMoveTop=strMove.position().top,k2=strMoveTop-(e.clientY-strWrap.offset().top)),strMove.stop(!0).css({top:dragTop})}).on("mouseup",function(){p.inverthover&&strMove.trigger("mouseenter"),$(this).off("mousemove"),setTimeout(function(){fMove=!1},50)}),!1}).on("click",function(){if(fMove)return!1}):strWrap.addClass("no_drag"))}else strWrap.addClass("str_static")};p.xml?$.ajax({url:p.xml,dataType:"xml",success:function(xml){for(var xmlTextEl=$(xml).find("text"),xmlTextLength=xmlTextEl.length,i=0;i<xmlTextLength;i++){var xmlElContent=xmlTextEl.eq(i).text(),xmlItemEl=$("<span>").text(xmlElContent).appendTo(strWrap);"left"!=p.direction&&"right"!=p.direction||(xmlItemEl.css({display:"inline-block",textAlign:"right"}),i>0&&xmlItemEl.css({width:strWrap.width()+xmlItemEl.width()})),"down"!=p.direction&&"up"!=p.direction||(xmlItemEl.css({display:"block",textAlign:"left"}),i>0&&xmlItemEl.css({paddingTop:strWrap.height()}))}code()}}):code(),strWrap.data({ini:code,startheight:startHeight})})},update:function(){var el=$(this),str_origin=$(".str_origin",el),str_move_clone=$(".str_move_clone",el);str_origin.stop(!0),str_move_clone.remove(),el.data("ini")()},destroy:function(){var el=$(this),elMove=$(".str_move",el),startHeight=el.data("startheight");$(".str_move_clone",el).remove(),el.off("mouseenter"),el.off("mousedown"),el.off("mouseup"),el.off("mouseleave"),el.off("mousemove"),el.removeClass("noStop").removeClass("str_vertical").removeClass("str_active").removeClass("no_drag").removeClass("str_static").removeClass("str_right").removeClass("str_down");var elStyle=el.attr("style");if(elStyle){for(var styleArr=elStyle.split(";"),i=0;i<styleArr.length;i++)-1!=$.trim(styleArr[i]).search(/^height/g)&&(styleArr[i]="");var newStyle=styleArr.join(";").replace(/;+/g,";");";"==newStyle?el.removeAttr("style"):el.attr("style",newStyle),startHeight&&el.css({height:startHeight})}if(elMove.stop(!0),elMove.length){var context=elMove.html();elMove.remove(),el.html(context)}},pause:function(){var el=$(this);$(".str_move",el).stop(!0)},play:function(){var el=$(this);$(this).off("mousemove"),el.data("moveF")()}};$.fn.liMarquee=function(method){return methods[method]?methods[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?void $.error("Метод "+method+" в jQuery.liMarquee не существует"):methods.init.apply(this,arguments)}}(jQuery);